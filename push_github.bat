@echo off
chcp 65001 >nul
echo.
echo ???????????????????????????????????????????????????????????
echo   ?? PUSH VERS GITHUB - DÉMINEUR HD
echo ???????????????????????????????????????????????????????????
echo.

REM Vérifier si Git est installé
where git >nul 2>&1
if %ERRORLEVEL% NEQ 0 (
    echo ? ERREUR: Git n'est pas installé ou pas dans le PATH !
    echo.
    echo ?? Téléchargez Git : https://git-scm.com/download/win
    echo.
    pause
    exit /b 1
)

echo ?? Statut actuel du dépôt...
echo.
git status
echo.

REM Demander le message de commit
set /p commit_message="?? Message de commit (ou Entrée pour 'Update'): "
if "%commit_message%"=="" set commit_message=Update

echo.
echo ???????????????????????????????????????????????????????????
echo   ?? Ajout des fichiers...
echo ???????????????????????????????????????????????????????????
echo.

REM Ajouter tous les fichiers
git add .

echo ? Fichiers ajoutés !
echo.

echo ???????????????????????????????????????????????????????????
echo   ?? Création du commit...
echo ???????????????????????????????????????????????????????????
echo.

git commit -m "%commit_message%"

if %ERRORLEVEL% EQU 0 (
    echo ? Commit créé avec succès !
) else (
    echo ??  Pas de changements à commiter ou commit réussi
)

echo.
echo ???????????????????????????????????????????????????????????
echo   ?? Push vers GitHub...
echo ???????????????????????????????????????????????????????????
echo.

git push origin main

if %ERRORLEVEL% EQU 0 (
    echo.
    echo ???????????????????????????????????????????????????????????
    echo   ? PUSH RÉUSSI !
    echo ???????????????????????????????????????????????????????????
    echo.
    echo ?? Votre projet est maintenant sur GitHub !
    echo ?? Dépôt : https://github.com/maxlo245/demineur
    echo.
) else (
    echo.
    echo ???????????????????????????????????????????????????????????
    echo   ??  ERREUR LORS DU PUSH
    echo ???????????????????????????????????????????????????????????
    echo.
    echo ?? Essayez manuellement :
    echo    1. git pull origin main
    echo    2. git push origin main
    echo.
)

pause
